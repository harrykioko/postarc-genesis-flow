
import { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Badge } from "@/components/ui/badge";
import { Building2, Clock, TrendingUp, Eye, Heart } from 'lucide-react';

interface ExamplePost {
  id: number;
  template: string;
  preview: string;
  author: string;
  location: string;
  views: string;
  reactions: string;
  timeAgo: string;
  isNew?: boolean;
  height: string;
}

const examplePosts: ExamplePost[] = [
  {
    id: 1,
    template: "Consultant",
    preview: "Ever wonder why 70% of digital transformations fail? After implementing AI solutions for Fortune 500s, I've identified the real culprit. It's not the technology...",
    author: "Sarah C.",
    location: "Marketing Director, NYC",
    views: "1.2k",
    reactions: "89",
    timeAgo: "2 hours ago",
    isNew: true,
    height: "h-72"
  },
  {
    id: 2,
    template: "Founder",
    preview: "We went from 0 to $1M ARR in 8 months. Here are the 3 brutal lessons that made the difference (and why most startups ignore them)...",
    author: "Marcus R.",
    location: "Founder, Austin",
    views: "2.8k",
    reactions: "147",
    timeAgo: "4 hours ago",
    height: "h-80"
  },
  {
    id: 3,
    template: "Sales",
    preview: "Last week, a client said 'This is exactly what we needed.' It wasn't luck. Here's my proven framework for consultative selling...",
    author: "Jennifer W.",
    location: "Sales Leader, Chicago",
    views: "847",
    reactions: "52",
    timeAgo: "Yesterday",
    height: "h-64"
  },
  {
    id: 4,
    template: "VC",
    preview: "I've reviewed 10,000+ pitches. The best founders all do this one thing differently. It's not what you think...",
    author: "David P.",
    location: "VC Partner, SF",
    views: "3.1k",
    reactions: "203",
    timeAgo: "12 min ago",
    height: "h-76"
  },
  {
    id: 5,
    template: "HR",
    preview: "Question: What's the #1 reason top talent leaves? It's not salary. We reduced employee turnover by 40% with one simple change...",
    author: "Lisa T.",
    location: "HR Director, Boston",
    views: "1.6k",
    reactions: "94",
    timeAgo: "6 hours ago",
    height: "h-68"
  },
  {
    id: 6,
    template: "Consultant",
    preview: "My biggest client just saved $2M annually. The solution was hiding in plain sight, but everyone missed it. Here's what we discovered...",
    author: "Ahmed H.",
    location: "Consultant, London",
    views: "423",
    reactions: "31",
    timeAgo: "1 day ago",
    height: "h-72"
  }
];

const templateColors = {
  "Consultant": "from-blue-500 to-blue-600",
  "Founder": "from-purple-500 to-purple-600",
  "Sales": "from-green-500 to-green-600",
  "VC": "from-orange-500 to-orange-600",
  "HR": "from-pink-500 to-pink-600"
};

export const PostShowcase = () => {
  const [postsCreated, setPostsCreated] = useState(237);

  useEffect(() => {
    const postsInterval = setInterval(() => {
      setPostsCreated(prev => prev + Math.floor(Math.random() * 3));
    }, 5000);

    return () => {
      clearInterval(postsInterval);
    };
  }, []);

  return (
    <section className="py-24 bg-gradient-to-b from-white to-slate-50 overflow-hidden">
      <div className="container mx-auto px-6">
        <div className="text-center mb-16">
          <h2 className="text-4xl md:text-5xl font-heading font-bold text-midnight mb-8">
            See What Professionals Are Creating
          </h2>
          <p className="text-xl text-slate max-w-2xl mx-auto">
            Real posts generated by AI, shared by industry leaders
          </p>
        </div>

        {/* Masonry Grid */}
        <div className="max-w-6xl mx-auto mb-12">
          <div className="grid md:grid-cols-3 gap-6">
            {examplePosts.map((post, index) => (
              <motion.div
                key={post.id}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
                viewport={{ once: true }}
                whileHover={{ 
                  scale: 1.02, 
                  y: -8,
                  boxShadow: "0 20px 40px rgba(0,0,0,0.1)"
                }}
                className={`glass-card p-6 rounded-xl ${post.height} relative overflow-hidden group cursor-pointer transition-all duration-300`}
              >
                {/* NEW Badge */}
                {post.isNew && (
                  <div className="absolute top-4 right-4 z-10">
                    <Badge className="bg-neon text-midnight font-bold">
                      <motion.span
                        animate={{ 
                          scale: [1, 1.05, 1],
                          opacity: [1, 0.8, 1]
                        }}
                        transition={{ 
                          duration: 2, 
                          repeat: Infinity,
                          ease: "easeInOut"
                        }}
                      >
                        NEW
                      </motion.span>
                    </Badge>
                  </div>
                )}
                
                {/* Template Badge */}
                <div className="mb-4">
                  <Badge className={`bg-gradient-to-r ${templateColors[post.template]} text-white border-0`}>
                    {post.template} Template
                  </Badge>
                </div>
                
                {/* Post Preview */}
                <div className="bg-white rounded-lg p-4 mb-4 flex-1">
                  <p className="text-midnight leading-relaxed text-sm">
                    {post.preview}
                  </p>
                </div>
                
                {/* Author Info */}
                <div className="flex items-center justify-between text-sm mb-3">
                  <div className="flex items-center">
                    <div className="w-8 h-8 bg-gradient-to-br from-midnight to-slate rounded-full mr-2 flex items-center justify-center">
                      <span className="text-white text-xs font-bold">
                        {post.author.split(' ')[0][0]}{post.author.split(' ')[1][0]}
                      </span>
                    </div>
                    <div>
                      <div className="font-medium text-midnight">{post.author}</div>
                      <div className="text-slate text-xs">{post.location}</div>
                    </div>
                  </div>
                  <div className="flex items-center text-xs text-slate">
                    <Clock className="w-3 h-3 mr-1" />
                    <span>{post.timeAgo}</span>
                  </div>
                </div>
                
                {/* Engagement Metrics */}
                <div className="flex items-center space-x-4 text-slate text-xs">
                  <div className="flex items-center">
                    <Eye className="w-3 h-3 mr-1" />
                    <span>{post.views} views</span>
                  </div>
                  <div className="flex items-center">
                    <Heart className="w-3 h-3 mr-1" />
                    <span>{post.reactions} reactions</span>
                  </div>
                </div>
                
                {/* Hover Glow Effect */}
                <div className="absolute inset-0 bg-gradient-to-r from-neon/5 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
              </motion.div>
            ))}
          </div>
        </div>

        {/* Live Posts Counter */}
        <div className="text-center">
          <div className="inline-flex items-center space-x-2 glass-card px-6 py-3 rounded-full">
            <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
            <motion.span
              key={postsCreated}
              initial={{ scale: 1.2 }}
              animate={{ scale: 1 }}
              className="text-sm font-medium text-midnight"
            >
              {postsCreated} posts created today
            </motion.span>
          </div>
        </div>
      </div>
    </section>
  );
};
